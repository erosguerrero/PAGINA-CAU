<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PV1</title>
    <!-- Por Eros Guerrero Sosa y Cristina Díez Sobrino-->
    <link rel="stylesheet" href="css/login.css" />
    <link rel="icon" type="image/x-icon" href="/img/favi.png" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous" />
    <link rel="stylesheet" type="text/css" herf="http.//fonts.googleapis.com/css" family="Helvetica" />
</head>

<body class="fondo">
    <div class="container-sm">
        <div id="header" class="trasparente row align-items-start justify-content-between">
            <div class="col-md-auto">
                <div id="brand" class="align-items-center">
                    <img id="logo" src="/img/favi.png" />
                    <h1>UCM-CAU</h1>
                    <p class="mb-0 centrar"> &nbsp Centro de Atención a Usuarios</p>
                </div>
            </div>
        </div>

        <div id="registerbox" class="mb-2">
            <form id =" formulario" method="POST" action="/register" enctype="multipart/form-data">
            <div class="card form-register">
                <div class="card-body">

                    <div class="row mb-3 form-floating mb-3">
                        <div class="col">
                            <input id="email" type="email" class="form-control" name="email" required
                                autocomplete="email" placeholder="Dirección de correo" autofocus>
                        </div>
                        <div class="col">
                            <input id="nombre" class="form-control" name="nombre" required autocomplete="nombre"
                                placeholder="Nombre para mostrar" autofocus>
                        </div>
                    </div>

                    <div class="row mb-3 form-floating mb-3">
                        <div class="col">
                            <input id="password" type="password" class="form-control" name="password"
                                
                                title="La contraseña debe tener al entre 8 y 16 caracteres,contener al menos un dígito, una minúscula, una mayúscula y un carácter no alfanumérico."
                                placeholder="Contraseña" required autocomplete="current-password">
                        </div>
                        <div class="col">
                            <select onchange="mostrarOcultarTecnico()" id="perfil"
                                class="form-select form-select-sm form-control" name="perfil" required>
                                <option hidden value="">Perfil de usuario</option>
                                <option value="A">Alumno</option>
                                <option value="PAS">Personal de Administración y Servicios (PAS)</option>
                                <option value="PDI">Personal Docente e Investigador (PDI)</option>
                                <option value="AA">Antiguo Alumno</option>
                            </select>
                        </div>
                    </div>

                    <div class="row mb-3 form-floating mb-3">
                        <div class="col-6">
                            <input id="passwordConfirm" type="password" 
                                title="La contraseña debe tener al entre 8 y 16 caracteres,contener al menos un dígito, una minúscula, una mayúscula y un carácter no alfanumérico."
                                class="form-control" name="passwordConfirm" placeholder="Confirmación de contraseña"
                                required>
                        </div>
                        <div class="col-2" style="display:none" id="divTecnico">
                            <input type="checkbox" onclick="isTecnico()" id="tecnico" name="tecnico" value="0"> Técnico
                            </input>
                        </div>
                        <div class="col-4">
                            <input class="form-control" id="nEmpleado" name="nEmpleado" style="display:none"
                                title="El número de empleado debe tener 4 dígitos seguido de un guión y 3 letras minúsculas."
                                placeholder="Número de empleado" pattern="^\d{4}-[a-z]{3}$"> </input>
                        </div>

                    </div>
                    <div class="row mb-3 form-floating mb-3">
                        <div>
                            <label class="w-50" for="foto" ><span>Foto: </span> 
                                <span><input type="file" id="imagen" name="imagen"></span>
                            </label>
                        </div>
                    </div>
                    <div class="d-grid gap-2  justify-content-md-end">
                        <div class="btn-group mt-5">
                            <button type="submit" name="register" class="btn ">Registrar</button>
                        </div>
                    </div>
                    <p></p>
                    <p></p>
                </div>
            </div>
            </form>
        </div>

        <%- include("flash") %>
            <div class=" abajo2 btn-group">
                <form method="GET" action="/login">
                    <button class="botonAmarillo btn">Atrás</button>
                </form>
            </div>

    </div>

    </div>


    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <script>
        function isTecnico() {
            var checkTecnico = document.getElementById("tecnico");
            var nEmpleado = document.getElementById("nEmpleado");
            if (checkTecnico.checked == true) {
                checkTecnico.value = "1";
                nEmpleado.style.display = "block";
                nEmpleado.setAttribute('required', 'required');
            } else {
                nEmpleado.style.display = "none";
                checkTecnico.value = "0";
                nEmpleado.removeAttribute('required');
            }
        }
    </script>

    <script>
        function mostrarOcultarTecnico() {
            var perfil = document.getElementById("perfil");
            var checkTecnico = document.getElementById("divTecnico");
            if (perfil.value == "PAS") {
                checkTecnico.style.display = "block";
            } else {
                checkTecnico.style.display = "none";
            }

        }
    </script>

</body>

</html>